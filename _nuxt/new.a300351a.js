import{H as V,_ as U}from"./TheContainer.55625e00.js";import{f as A,r as q,y as T,o as S,c as C,a as r,m as y,v as g,g as e,n as b,t as c,q as F,z as $,b as k,w as v}from"./entry.4e723040.js";import{t as z,o as B,s as _,u as E,a as f}from"./vee-validate.esm.2abd4646.js";import{b as H}from"./article.b7024956.js";import{A as L}from"./index.e0cfa627.js";import{a as N}from"./auth.d5266ccf.js";const P=["disabled"],j={class:"mb-4"},D={class:"text-red-500"},M={class:"mb-4"},W={class:"text-red-500"},O={class:"mb-4"},R={class:"text-red-500"},G={class:"mb-4"},I={class:"text-red-500"},J=["disabled"],K=A({__name:"ArticleForm",props:{author:{type:Object,required:!0}},setup(x){const u=x,o=q(!1),p=z(B({title:_().nonempty("This is required").min(4,{message:"Too short"}),description:_(),body:_().nonempty("This is required"),tags:_().nullable().optional()})),{handleSubmit:h,errors:s}=E({validationSchema:p}),{value:m}=f("title"),{value:l}=f("description"),{value:i}=f("body"),{value:d}=f("tags"),w=h(async n=>{o.value=!0;try{const t=await H(u.author.token,{title:n.title,description:n.description,body:n.body,tagList:n.tags});await T(`/article/${t.article.slug}`)}catch(t){alert(t)}finally{o.value=!1}});return(n,t)=>(S(),C("form",{class:"space-y-4",onSubmit:t[4]||(t[4]=(...a)=>e(w)&&e(w)(...a))},[r("fieldset",{disabled:e(o),class:"space-y-4"},[r("div",j,[y(r("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>b(m)?m.value=a:null),name:"title",type:"text",placeholder:"Article Title",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},null,512),[[g,e(m)]]),r("span",D,c(e(s).title),1)]),r("div",M,[y(r("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>b(l)?l.value=a:null),name:"description",type:"text",placeholder:"What's this article about?",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},null,512),[[g,e(l)]]),r("span",W,c(e(s).description),1)]),r("div",O,[y(r("textarea",{"onUpdate:modelValue":t[2]||(t[2]=a=>b(i)?i.value=a:null),name:"body",placeholder:"Write your article...",rows:"8",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 resize-y"},null,512),[[g,e(i)]]),r("span",R,c(e(s).body),1)]),r("div",G,[y(r("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>b(d)?d.value=a:null),name:"tags",type:"text",placeholder:"Enter tags",class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500"},null,512),[[g,e(d)]]),r("span",I,c(e(s).tags),1)]),r("button",{disabled:e(o),class:F(["float-right px-6 py-3 text-base text-white bg-gray-500 border border-gray rounded-md hover:bg-gray-600",{"bg-gray-300 cursor-not-allowed":e(o)}])}," Publish Article ",10,J)],8,P)],32))}}),Q={class:"mt-20"},X={class:"w-full md:w-10/12 md:mx-auto"},or=A({__name:"new",async setup(x){let u,o;const p=N();p.isAuthenticated||([u,o]=$(()=>T("/")),await u,o());const h=L.toLocaleLowerCase();return(s,m)=>{const l=V,i=K,d=U;return S(),C("div",Q,[k(l,null,{default:v(()=>[r("title",null,`\r
        Новая статья - `+c(e(h))+`\r
      `,1)]),_:1}),k(d,null,{default:v(()=>[r("div",X,[k(i,{author:e(p).currentUser},null,8,["author"])])]),_:1})])}}});export{or as default};
