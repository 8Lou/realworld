import{H as T,_ as N}from"./TheContainer.58caa0a4.js";import{_ as $}from"./nuxt-link.ce1698c8.js";import{f as A,r as C,y as L,o as v,c as S,a as e,q as c,g as t,m as h,v as b,n as x,t as _,b as l,w as p,d as P}from"./entry.00d493d3.js";import{t as V,o as B,s as y,u as E,a as w}from"./vee-validate.esm.ac5e120a.js";import{a as F}from"./auth.3873e1eb.js";import{a as k,A as q}from"./index.e0cfa627.js";const H=d=>$fetch(`${k}/users/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:d}),M={class:"space-y-4"},U={class:"text-red-500"},j={class:"text-red-500"},D=["disabled"],I=A({__name:"LoginForm",setup(d){const o=C(!1),g=V(B({email:y().nonempty("This is required").email({message:"Must be a valid email"}),password:y().nonempty("This is required").min(6,{message:"Too short"})})),{handleSubmit:m,errors:i}=E({validationSchema:g}),{value:n}=w("email"),{value:r}=w("password"),f=m(async u=>{o.value=!0;try{const s=await H({user:{email:u.email,password:u.password}});F().signIn(s.user),await L("/")}catch(s){alert(s)}finally{o.value=!1}});return(u,s)=>(v(),S("form",{onSubmit:s[2]||(s[2]=(...a)=>t(f)&&t(f)(...a))},[e("fieldset",M,[e("div",{class:c(["form-group",{"opacity-50 pointer-events-none":t(o)}])},[h(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>x(n)?n.value=a:null),name:"email",type:"email",placeholder:"Email",class:"w-full px-6 py-3 text-base leading-5 text-gray-600 bg-white border border-gray-300 rounded-md"},null,512),[[b,t(n)]]),e("span",U,_(t(i).email),1)],2),e("div",{class:c(["form-group",{"opacity-50 pointer-events-none":t(o)}])},[h(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>x(r)?r.value=a:null),name:"password",type:"password",placeholder:"Password",class:"w-full px-6 py-3 text-base leading-5 text-gray-600 bg-white border border-gray-300 rounded-md"},null,512),[[b,t(r)]]),e("span",j,_(t(i).password),1)],2),e("button",{disabled:t(o),class:c(["float-right px-6 py-3 text-base text-white bg-custom-green border border-custom-green rounded-md hover:bg-green-600",{"bg-gray-300 cursor-not-allowed":t(o)}])}," Sign in ",10,D)])],32))}}),R={class:"w-full md:w-1/2 md:mx-auto"},z=e("h1",{class:"text-center text-4xl font-medium mb-2"},"Sign in",-1),O={class:"text-center mb-6"},Y={__name:"login",setup(d){return(o,g)=>{const m=T,i=$,n=I,r=N;return v(),S("div",null,[l(m,null,{default:p(()=>[e("title",null,"Login â€” "+_(t(q)),1)]),_:1}),l(r,null,{default:p(()=>[e("div",R,[z,e("p",O,[l(i,{href:"/user/register",class:"text-custom-green no-underline hover:text-green-600 hover:underline"},{default:p(()=>[P(" Need an account? ")]),_:1})]),l(n)])]),_:1})])}}};export{Y as default};
